# name: Build server and run linter
# on: pull_request
# jobs:
#   build:
#     runs-on: ubuntu-latest
#     steps:
#       # Client build
#       - name: setup Node v14
#         uses: actions/setup-node@v2
#         with:
#           node-version: '14'
      
#       - name: checkout
#         uses: actions/checkout@v2

#       - name: ci - before_install
#         run: bash -e ./scripts/before_install.sh

      
#       - name: yarn install
#         run: yarn install --pure-lockfile

#       - name: bower
#         uses: nick-invision/retry@v2
#         with:
#           timeout_seconds: 30
#           max_attempts: 3
#           command: bower install --allow-root --force-latest
      
#       - name: ci - build
#         run: bash -e ./scripts/build.sh

#       - name: enter diff_worker
#         run: cd diff_worker
      
#       - name: diff_worker
#         uses: nick-invision/retry@v2
#         with:
#           timeout_seconds: 30
#           max_attempts: 3
#           command: bower install --allow-root --force-latest
      
#       - name: enter truss_worker
#         run: cd ../truss_worker
      
#       - name: truss_worker
#         uses: nick-invision/retry@v2
#         with:
#           timeout_seconds: 30
#           max_attempts: 3
#           command: bower install --allow-root --force-latest

#       - name: back to root
#         run: cd ..
      
#       - name: cleanup
#         run: bash -e ./scripts/cleanup.sh
      
#       - name: cleanup on failure
#         if: ${{ failure() }}
#         run: bash -e ./scripts/cleanup.sh
        
